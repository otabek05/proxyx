version: 2
project_name: proxyx

builds:
  - id: proxyx
    main: ./cmd/proxyx/main.go
    binary: proxyx
    goos:
      - linux
      - darwin
    goarch:
      - amd64
      - arm64
    env:
      - CGO_ENABLED=0

nfpms:
  - id: proxyx-linux
    package_name: proxyx
    builds:
      - proxyx
    formats:
      - deb
      - rpm

    maintainer: Otabek Toshmukhammedov <otabektoshmukhammedov@gmail.com>
    description: ProxyX Reverse Proxy Service
    license: MIT
    bindir: /usr/local/bin

    contents:
      - src: releaser/linux/systemd/proxyx.service
        dst: /etc/systemd/system/proxyx.service

      - src: web
        dst: /etc/proxyx/web

    scripts:
      preinstall: releaser/linux/scripts/preinstall.sh
      postinstall: releaser/linux/scripts/postinstall.sh
      preremove: releaser/linux/scripts/preremove.sh

